/*! For license information please see main.7ea9b396.chunk.js.LICENSE.txt */
(this["webpackJsonpteablocks-rnd"]=this["webpackJsonpteablocks-rnd"]||[]).push([[0],{117:function(e,t,n){"use strict";n.d(t,"a",(function(){return s}));var a=n(3),i=n(6),r=n(4),o=n(5),c=n(16),s=function(e){Object(r.a)(n,e);var t=Object(o.a)(n);function n(e,i){var r;return Object(a.a)(this,n),(r=t.call(this,e)).shapeName=void 0,r.shapeName=i,r}return Object(i.a)(n,[{key:"evalBlock",value:function(e){var t="$"+this.shapeName;if(e.has(t))return t;throw new c.a("Shape ".concat(this.shapeName," does not exist!"),this.id)}}]),n}(n(17).a)},118:function(e,t,n){"use strict";n.d(t,"a",(function(){return h}));var a=n(20),i=n.n(a),r=n(3),o=n(6),c=n(4),s=n(5),u=n(16),l=n(22),d=n(67),h=function(e){Object(c.a)(n,e);var t=Object(s.a)(n);function n(e,a,i,o){var c;return Object(r.a)(this,n),(c=t.call(this,e)).shapeName=void 0,c.color=void 0,c.shapeType=void 0,c.posX=void 0,c.posY=void 0,c.scaleX=void 0,c.scaleY=void 0,c.rot=void 0,c.shapeType=a,c.color=i,console.log(o),c.shapeName=o[0],c.posX=o[1],c.posY=o[2],c.scaleX=o[3],c.scaleY=o[4],c.rot=o[5],c}return Object(o.a)(n,[{key:"evalBlock",value:i.a.mark((function e(t){var n,a,r,o,c,s;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=String(this.shapeName.evalBlock(t)),a=Number(this.posX.evalBlock(t)),r=Number(this.posY.evalBlock(t)),o=Number(this.scaleX.evalBlock(t)),c=Number(this.scaleY.evalBlock(t)),s=Number(this.rot.evalBlock(t)),console.log(n),console.log(a),console.log(r),console.log(o),console.log(c),console.log(s),!(isNaN(a)||isNaN(r)||isNaN(o)||isNaN(c)||isNaN(s))){e.next=14;break}throw new u.a("Shape input not a number",this.id);case 14:return t.set("$"+n,new d.a(n,this.shapeType,this.color,a,r,o,c,s)),void(e.next=17);case 17:case"end":return e.stop()}}),e,this)}))}]),n}(l.a)},119:function(e,t,n){"use strict";n.d(t,"a",(function(){return i}));var a=n(3),i=function e(){Object(a.a)(this,e),this.isRoot=void 0,this.isRoot=!0}},120:function(e,t,n){"use strict";n.d(t,"a",(function(){return r}));var a=n(3),i=n(26),r=function e(t,n,r,o,c,s,u){Object(a.a)(this,e),this.id=void 0,this.coordinates=void 0,this.content=void 0,this.outputs=void 0,this.data=void 0,this.render=void 0,this.blockType=void 0,this.constInputs=void 0,this.id=i.a.getID(),this.coordinates=n,this.content=t,this.data=s,this.render=u,this.blockType=o,this.constInputs=c,console.log("Inputs id: "+this.id),this.outputs=[];for(var l=0;l<r;l++){var d={id:this.id+"-output-"+l};this.outputs.push(d)}}},124:function(e,t,n){"use strict";n.d(t,"a",(function(){return i}));var a=n(3),i=function e(t){Object(a.a)(this,e),this.id=void 0,this.id=t}},127:function(e,t,n){"use strict";var a=n(289);n.d(t,"ButtonStatusBlock",(function(){return a.a}));var i=n(290);n.d(t,"JoyXStatusBlock",(function(){return i.a}));var r=n(291);n.d(t,"JoyYStatusBlock",(function(){return r.a}));n(292)},13:function(e,t,n){"use strict";var a;n.d(t,"a",(function(){return a})),function(e){e[e.CLB=0]="CLB",e[e.CONST=1]="CONST",e[e.EQ=2]="EQ",e[e.GEQ=3]="GEQ",e[e.GT=4]="GT",e[e.LEQ=5]="LEQ",e[e.LT=6]="LT",e[e.AND=7]="AND",e[e.NOT=8]="NOT",e[e.OR=9]="OR",e[e.DIV=10]="DIV",e[e.SUM=11]="SUM",e[e.SUBTRACT=12]="SUBTRACT",e[e.EXP=13]="EXP",e[e.MOD=14]="MOD",e[e.PROD=15]="PROD",e[e.MAKE_SHAPE=16]="MAKE_SHAPE",e[e.MOVE_SHAPE=17]="MOVE_SHAPE",e[e.ROTATE_SHAPE=18]="ROTATE_SHAPE",e[e.SCALE_SHAPE=19]="SCALE_SHAPE",e[e.GET_SHAPE=20]="GET_SHAPE",e[e.FOR=21]="FOR",e[e.IF=22]="IF",e[e.WHILE=23]="WHILE",e[e.TERNARY=24]="TERNARY",e[e.VAR_ASSIGN=25]="VAR_ASSIGN",e[e.VAR_DELETE=26]="VAR_DELETE",e[e.VAR_RETRIEVE=27]="VAR_RETRIEVE",e[e.NEST=28]="NEST",e[e.JOY_X=29]="JOY_X",e[e.JOY_Y=30]="JOY_Y",e[e.BTN_STATUS=31]="BTN_STATUS",e[e.ARR_CREATE=32]="ARR_CREATE",e[e.ARR_SET_IX=33]="ARR_SET_IX",e[e.ARR_GET_IX=34]="ARR_GET_IX",e[e.MAKE_CONTROL_ELEM=35]="MAKE_CONTROL_ELEM",e[e.GET_X=36]="GET_X",e[e.GET_Y=37]="GET_Y"}(a||(a={}))},16:function(e,t,n){"use strict";n.d(t,"a",(function(){return c}));var a=n(3),i=n(4),r=n(5),o=n(126),c=function(e){Object(i.a)(n,e);var t=Object(r.a)(n);function n(e,i){var r;return Object(a.a)(this,n),(r=t.call(this,e)).id=void 0,r.id=i,r.name="TeaBlocksError",r}return n}(Object(o.a)(Error))},17:function(e,t,n){"use strict";n.d(t,"a",(function(){return o}));var a=n(3),i=n(4),r=n(5),o=function(e){Object(i.a)(n,e);var t=Object(r.a)(n);function n(){return Object(a.a)(this,n),t.apply(this,arguments)}return n}(n(124).a)},188:function(e,t,n){},22:function(e,t,n){"use strict";n.d(t,"a",(function(){return c}));var a=n(3),i=n(6),r=n(4),o=n(5),c=function(e){Object(r.a)(n,e);var t=Object(o.a)(n);function n(){var e;Object(a.a)(this,n);for(var i=arguments.length,r=new Array(i),o=0;o<i;o++)r[o]=arguments[o];return(e=t.call.apply(t,[this].concat(r))).voidBlock=!0,e}return Object(i.a)(n,[{key:"getLength",value:function(){return 1}}]),n}(n(124).a)},26:function(e,t,n){"use strict";n.d(t,"a",(function(){return N}));var a,i=n(2),r=n(3),o=n(6),c=n(39),s=n.n(c),u=n(27),l=(n(188),n(125)),d=n(0),h=n(18),v=[150,60],f=function(){function e(){Object(r.a)(this,e),this.nodes=void 0,this.links=void 0,this.nodes=[],this.links=[]}return Object(o.a)(e,[{key:"getNextCoordinates",value:function(){return null==this.nodes||0===this.nodes.length?v:[this.nodes[this.nodes.length-1].coordinates[0]+150,this.nodes[this.nodes.length-1].coordinates[1]]}}]),e}();!function(e){e.JOYSTICK="joy",e.BUTTON="btn"}(a||(a={}));var p=n(7),b=n(44),m=n(49),O=n(73),j=function(){function e(t){Object(r.a)(this,e),this.parentSchemaId=void 0,this.parentSchemaId=t}return Object(o.a)(e,[{key:"centralizeCoordinates",value:function(e){return[e[0]-100,e[1]-100]}},{key:"nextCoordinates",value:function(){var e;if(!N.getIDE().validatedSchemas.has(this.parentSchemaId))throw Error("Not initalized!");var t=null===(e=N.getIDE().validatedSchemas.get(this.parentSchemaId))||void 0===e?void 0:e.getNextCoordinates();return t||[0,0]}},{key:"makeFunction",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.nextCoordinates();switch(t=this.centralizeCoordinates(t),e){case p.a.SUM:this.addFunctionNode("Adder",e,[],2,1,["In","In"],["Out"],t);break;case p.a.PROD:this.addFunctionNode("Multiply",e,[],2,1,["In","In"],["Out"],t);break;case p.a.SUBTRACT:this.addFunctionNode("Subtract",e,[],2,1,["In","In"],["Out"],t);break;case p.a.DIV:this.addFunctionNode("Divide",e,[],2,1,["In","In"],["Out"],t);break;case p.a.EQ:this.addFunctionNode("==",e,[],2,1,["Left","Right"],["Out"],t);break;case p.a.LT:this.addFunctionNode("<",e,[],2,1,["Left","Right"],["Out"],t);break;case p.a.GT:this.addFunctionNode(">",e,[],2,1,["Left","Right"],["Out"],t);break;case p.a.LEQ:this.addFunctionNode("<=",e,[],2,1,["Left","Right"],["Out"],t);break;case p.a.GEQ:this.addFunctionNode(">=",e,[],2,1,["Left","Right"],["Out"],t);break;case p.a.AND:this.addFunctionNode("AND",e,[],2,1,["Left","Right"],["Out"],t);break;case p.a.OR:this.addFunctionNode("OR",e,[],2,1,["Left","Right"],["Out"],t);break;case p.a.NOT:this.addFunctionNode("NOT",e,[],1,1,["in"],["Out"],t);break;case p.a.TERNARY:this.addFunctionNode("Ternary",e,[],3,1,["If","Then","Else"],["Out"],t);break;case p.a.MOD:this.addFunctionNode("Modulo %",e,[],2,1,["In","In"],["Out"],t);break;case p.a.EXP:this.addFunctionNode("Exponent",e,[],2,1,["In","In"],["Out"],t);break;case p.a.GET_X:this.addFunctionNode("Get X",e,[],1,1,["Shape"],["X"],t);break;case p.a.GET_Y:this.addFunctionNode("Get Y",e,[],1,1,["Shape"],["Y"],t);break;default:console.error("This type is not supported by makeFunction")}}},{key:"makeInput",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.nextCoordinates();switch(t=this.centralizeCoordinates(t),e){case p.a.CONST:var n=prompt("What is the value?","0");this.addInputNode("Constant: ".concat(n),e,[n],1,["Value"],t);break;case p.a.VAR_RETRIEVE:var a=prompt("What is the name of the variable?");this.addInputNode("Get ".concat(a),e,[a],1,["Value"],t);break;case p.a.GET_SHAPE:var i=prompt("What shape name?");this.addInputNode("Get ".concat(i),e,[i],1,["Shape"],t);break;case p.a.JOY_X:var r=prompt("What joystick name?","joystick");this.addInputNode("Get ".concat(r," X"),e,[r],1,["X"],t);break;case p.a.JOY_Y:var o=prompt("What joystick name?","joystick");this.addInputNode("Get ".concat(o," Y"),e,[o],1,["Y"],t);break;case p.a.ARR_GET_IX:var c=prompt("What is the array name");this.addInputNode("Get ".concat(c),e,[c],1,["Value"],t);break;default:return void console.error("This type is not supported by makeInput")}}},{key:"makeOutput",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.nextCoordinates();switch(t=this.centralizeCoordinates(t),e){case p.a.CLB:this.addOutputNode("Console",e,[],1,["Value"],t);break;case p.a.VAR_ASSIGN:var n=prompt("Pick a variable name");this.addOutputNode("Assign ".concat(n),e,[n],1,["Value"],t);break;case p.a.VAR_DELETE:var i=prompt("Pick a variable name to delete");this.addOutputNode("Delete ".concat(i),e,[i],0,[],t);break;case p.a.MAKE_SHAPE:var r=prompt("Pick a type!",m.g.RECT),o=prompt("Pick a color (rgb value)",m.f.BLUE);this.addOutputNode("Make ".concat(r),e,[r,o],6,["Name","X","Y","Stretch-X","Stretch-Y","Rotation"],t);break;case p.a.ROTATE_SHAPE:this.addOutputNode("Rotate",e,[],2,["Shape","Rotation"],t);break;case p.a.MOVE_SHAPE:this.addOutputNode("Move",e,[],3,["Shape","X","Y"],t);break;case p.a.SCALE_SHAPE:this.addOutputNode("Stretch",e,[],3,["Shape","X","Y"],t);break;case p.a.ARR_CREATE:var c=prompt("What is the name of array?");this.addOutputNode("Create ".concat(c),e,[c],0,[],t);break;case p.a.ARR_SET_IX:var s=prompt("What is the name of array?");this.addOutputNode("Set ".concat(s),e,[s],2,["Index","Value"],t);break;case p.a.MAKE_CONTROL_ELEM:var u=prompt("Pick element type",a.JOYSTICK),l=prompt("Pick element name","joystick");this.addOutputNode("Make ".concat(l),e,[u,l],2,["X","Y"],t);break;default:return void console.error("This node is not supported by makeOutput")}}},{key:"makeSpecial",value:function(e){var t,n,a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.nextCoordinates();switch(a=this.centralizeCoordinates(a),e){case p.a.IF:var i=new O.IfNode("IF",a,[],{parentSchema:this.parentSchemaId,inputNames:["Condition"],problematic:!1},b.IfRender);null===(t=N.getIDE().schemaMethods.get(this.parentSchemaId))||void 0===t||t.addNode(i);break;case p.a.WHILE:var r=new O.WhileNode("WHILE",a,[],{parentSchema:this.parentSchemaId,inputNames:["Condition"],problematic:!1},b.WhileRender);null===(n=N.getIDE().schemaMethods.get(this.parentSchemaId))||void 0===n||n.addNode(r);break;default:return void console.error("This node is not supported by makeSpecial")}}},{key:"addInputNode",value:function(e,t,n,a){var i,r=arguments.length>4&&void 0!==arguments[4]?arguments[4]:[],o=arguments.length>5?arguments[5]:void 0,c=new O.InputNode(e,o,a,t,n,{parentSchema:this.parentSchemaId,outputNames:r,problematic:!1},b.CustomRender);null===(i=N.getIDE().schemaMethods.get(this.parentSchemaId))||void 0===i||i.addNode(c)}},{key:"addOutputNode",value:function(e,t,n,a,i,r){var o,c=new O.OutputNode(e,r,a,t,n,{parentSchema:this.parentSchemaId,inputNames:i,problematic:!1},b.CustomRender);null===(o=N.getIDE().schemaMethods.get(this.parentSchemaId))||void 0===o||o.addNode(c)}},{key:"addFunctionNode",value:function(e,t,n,a,i,r,o,c){var s,u=new O.FunctionNode(e,c,a,i,t,n,{parentSchema:this.parentSchemaId,inputNames:r,outputNames:o,problematic:!1},b.CustomRender);null===(s=N.getIDE().schemaMethods.get(this.parentSchemaId))||void 0===s||s.addNode(u)}}]),e}();function k(e){return Object(i.jsx)(l.a,{schema:e.schema,onChange:e.onChange})}function g(e){var t=N.getIDE().validatedSchemas.get(e.schemaId),n=Object(l.b)(t||new f),a=Object(u.a)(n,2),r=a[0],o=a[1],c=o.onChange,s=o.addNode,v=o.removeNode,b=function(e){var t=r.nodes.find((function(t){return t.id===e}));t&&v(t)},m=Object(d.useState)(new j(e.schemaId)),O=Object(u.a)(m,1)[0],g=Object(d.useState)(Function),y=Object(u.a)(g,2),E=y[0],I=y[1];function w(e){var t=function(t){O.makeInput(e,t)};I((function(){return t}))}function S(e){var t=function(t){O.makeOutput(e,t)};I((function(){return t}))}function x(e){var t=function(t){O.makeFunction(e,t)};I((function(){return t}))}function B(e){var t=function(t){O.makeSpecial(e,t)};I((function(){return t}))}return Object(d.useEffect)((function(){N.getIDE().addSchema(e.schemaId,r,{deleteNodeFromSchema:b,onChange:c,addNode:s})}),[r]),Object(i.jsxs)("div",{className:"diagram-section",children:[Object(i.jsx)("div",{className:"diagram-display-area",onClick:function(e){return function(e){null!=E&&(E([e.pageX,e.pageY]),I((function(){})))}(e)},children:Object(i.jsx)(k,{schema:r,onChange:c})}),Object(i.jsxs)("div",{className:"sidebar",children:[Object(i.jsx)(h.Button,{color:"primary",icon:"plus",onClick:function(){return w(p.a.CONST)},children:"Constant"}),Object(i.jsx)(h.Button,{color:"primary",icon:"plus",onClick:function(){return S(p.a.VAR_ASSIGN)},children:"Variable Assign"}),Object(i.jsx)(h.Button,{color:"primary",icon:"plus",onClick:function(){return w(p.a.VAR_RETRIEVE)},children:"Variable Get"}),Object(i.jsx)(h.Button,{color:"primary",icon:"plus",onClick:function(){return S(p.a.VAR_DELETE)},children:"Variable Delete"}),Object(i.jsx)("hr",{}),Object(i.jsx)(h.Button,{color:"primary",icon:"plus",onClick:function(){return S(p.a.ARR_CREATE)},children:"Create Array"}),Object(i.jsx)(h.Button,{color:"primary",icon:"plus",onClick:function(){return S(p.a.ARR_SET_IX)},children:"Array Set Index"}),Object(i.jsx)(h.Button,{color:"primary",icon:"plus",onClick:function(){return w(p.a.ARR_GET_IX)},children:"Array Get Index"}),Object(i.jsx)("hr",{}),Object(i.jsx)(h.Button,{color:"primary",icon:"plus",onClick:function(){return x(p.a.SUM)},children:"Adder"}),Object(i.jsx)(h.Button,{color:"primary",icon:"plus",onClick:function(){return x(p.a.SUBTRACT)},children:"Subtract"}),Object(i.jsx)(h.Button,{color:"primary",icon:"plus",onClick:function(){return x(p.a.PROD)},children:"Multiply"}),Object(i.jsx)(h.Button,{color:"primary",icon:"plus",onClick:function(){return x(p.a.DIV)},children:"Divide"}),Object(i.jsx)("hr",{}),Object(i.jsx)(h.Button,{color:"primary",icon:"plus",onClick:function(){return S(p.a.MAKE_CONTROL_ELEM)},children:"Create Control"}),Object(i.jsx)(h.Button,{color:"primary",icon:"plus",onClick:function(){return w(p.a.JOY_X)},children:"Joystick X"}),Object(i.jsx)(h.Button,{color:"primary",icon:"plus",onClick:function(){return w(p.a.JOY_Y)},children:"Joystick Y"}),Object(i.jsx)("hr",{}),Object(i.jsx)(h.Button,{color:"primary",icon:"plus",onClick:function(){return S(p.a.MAKE_SHAPE)},children:"Shape"}),Object(i.jsx)(h.Button,{color:"primary",icon:"arrow-up",onClick:function(){return w(p.a.GET_SHAPE)},children:"Get Shape"}),Object(i.jsx)(h.Button,{color:"primary",icon:"plus",onClick:function(){return S(p.a.MOVE_SHAPE)},children:"Move Shape"}),Object(i.jsx)(h.Button,{color:"primary",icon:"plus",onClick:function(){return S(p.a.ROTATE_SHAPE)},children:"Rotate Shape"}),Object(i.jsx)(h.Button,{color:"primary",icon:"plus",onClick:function(){return S(p.a.SCALE_SHAPE)},children:"Stretch Shape"}),Object(i.jsx)(h.Button,{color:"primary",icon:"plus",onClick:function(){return x(p.a.GET_X)},children:"Get X"}),Object(i.jsx)(h.Button,{color:"primary",icon:"plus",onClick:function(){return x(p.a.GET_Y)},children:"Get Y"}),Object(i.jsx)("hr",{}),Object(i.jsx)(h.Button,{color:"primary",icon:"plus",onClick:function(){return x(p.a.GEQ)},children:">="}),Object(i.jsx)(h.Button,{color:"primary",icon:"plus",onClick:function(){return x(p.a.LEQ)},children:"<="}),Object(i.jsx)(h.Button,{color:"primary",icon:"plus",onClick:function(){return x(p.a.LT)},children:"<"}),Object(i.jsx)(h.Button,{color:"primary",icon:"plus",onClick:function(){return x(p.a.GT)},children:">"}),Object(i.jsx)(h.Button,{color:"primary",icon:"plus",onClick:function(){return x(p.a.EQ)},children:"=="}),Object(i.jsx)(h.Button,{color:"primary",icon:"plus",onClick:function(){return x(p.a.AND)},children:"AND"}),Object(i.jsx)(h.Button,{color:"primary",icon:"plus",onClick:function(){return x(p.a.OR)},children:"OR"}),Object(i.jsx)(h.Button,{color:"primary",icon:"plus",onClick:function(){return x(p.a.NOT)},children:"NOT"}),Object(i.jsx)("hr",{}),Object(i.jsx)(h.Button,{color:"primary",icon:"plus",onClick:function(){return x(p.a.TERNARY)},children:"if then else"}),Object(i.jsx)(h.Button,{color:"primary",icon:"plus",onClick:function(){return B(p.a.IF)},children:"IF"}),Object(i.jsx)(h.Button,{color:"primary",icon:"plus",onClick:function(){return B(p.a.WHILE)},children:"WHILE"}),Object(i.jsx)("hr",{}),Object(i.jsx)(h.Button,{color:"primary",icon:"plus",onClick:function(){return S(p.a.CLB)},children:"Print"})]})]})}var N=function(){function e(t){Object(r.a)(this,e),this.ideId=void 0,this.validatedSchemas=void 0,this.schemaMethods=void 0,this.displaySchemaId=void 0,this.validatedSchemas=new Map,this.schemaMethods=new Map,this.displaySchemaId="main",this.ideId=t}return Object(o.a)(e,null,[{key:"getID",value:function(){return String(e.globalNextId++)}}]),Object(o.a)(e,[{key:"renderDiagram",value:function(){console.log("rendering IDE");var e=Object(i.jsx)("div",{children:Object(i.jsx)(g,{schemaId:this.displaySchemaId})});s.a.render(e,document.getElementById(this.ideId))}},{key:"redrawDiagram",value:function(){var e=document.getElementById(this.ideId);e&&s.a.unmountComponentAtNode(e),this.renderDiagram()}},{key:"addSchema",value:function(e,t,n){this.validatedSchemas.set(e,t),this.schemaMethods.set(e,n)}},{key:"setDisplaySchemaId",value:function(e){this.displaySchemaId=e,this.redrawDiagram()}},{key:"loadSchemas",value:function(t,n){this.validatedSchemas=t,e.globalNextId=Number(n),this.schemaMethods=new Map,this.displaySchemaId="main",this.redrawDiagram()}},{key:"flagNodes",value:function(){for(var e=this,t=arguments.length,n=new Array(t),a=0;a<t;a++)n[a]=arguments[a];n.forEach((function(t){for(var n=0,a=Array.from(e.validatedSchemas.values());n<a.length;n++){var i=a[n].nodes.find((function(e){return e.id===t}));if(i){i.data.problematic=!0,console.log("Flagged ".concat(t,"!"));break}}}))}},{key:"unflagNodes",value:function(){this.validatedSchemas.forEach((function(e){e.nodes.forEach((function(e){return e.data.problematic=!1}))}))}}],[{key:"getIDE",value:function(){return e.instance||(e.instance=new e("ide")),e.instance}}]),e}();N.globalNextId=0,N.instance=void 0},289:function(e,t,n){"use strict";n.d(t,"a",(function(){return c}));var a=n(3),i=n(6),r=n(4),o=n(5),c=function(e){Object(r.a)(n,e);var t=Object(o.a)(n);function n(e,i){var r;return Object(a.a)(this,n),(r=t.call(this,e)).buttonName=void 0,r.buttonName=i,r}return Object(i.a)(n,[{key:"evalBlock",value:function(e){var t=e.get("&btn-"+this.buttonName);return Boolean(t)}}]),n}(n(17).a)},290:function(e,t,n){"use strict";n.d(t,"a",(function(){return s}));var a=n(3),i=n(6),r=n(4),o=n(5),c=n(16),s=function(e){Object(r.a)(n,e);var t=Object(o.a)(n);function n(e,i){var r;return Object(a.a)(this,n),(r=t.call(this,e)).joyName=void 0,r.joyName=i,r}return Object(i.a)(n,[{key:"evalBlock",value:function(e){var t="&"+this.joyName;if(!e.has(t))throw new c.a("Joystick ".concat(this.joyName," does not exist"),this.id);return e.get(t).x}}]),n}(n(17).a)},291:function(e,t,n){"use strict";n.d(t,"a",(function(){return s}));var a=n(3),i=n(6),r=n(4),o=n(5),c=n(16),s=function(e){Object(r.a)(n,e);var t=Object(o.a)(n);function n(e,i){var r;return Object(a.a)(this,n),(r=t.call(this,e)).joyName=void 0,r.joyName=i,r}return Object(i.a)(n,[{key:"evalBlock",value:function(e){var t="&"+this.joyName;if(!e.has(t))throw new c.a("Joystick ".concat(this.joyName," does not exist"),this.id);return e.get(t).y}}]),n}(n(17).a)},292:function(e,t){},293:function(e,t,n){"use strict";n.d(t,"a",(function(){return o}));var a=n(2),i=n(18),r=(n(294),n(37));function o(e){var t=e.inputs?r.a.makeInputDivs(e.inputs,e.data.inputNames):[],n=e.outputs?r.a.makeOutputDivs(e.outputs,e.data.outputNames):[];return Object(a.jsx)("div",{className:"node-wrapper",children:Object(a.jsxs)("div",{className:e.data.problematic?"custom-node-problem":"custom-node",children:[Object(a.jsx)("div",{className:"deleteBtn",children:Object(a.jsx)(i.Button,{icon:"times",size:"small",onClick:function(){return r.a.deleteNode(e.data.parentSchema,e.id)}})}),Object(a.jsxs)("div",{className:"ports",children:[Object(a.jsx)("div",{className:"inputs",children:t}),Object(a.jsx)("div",{className:"content",children:e.content}),Object(a.jsx)("div",{className:"outputs",children:n})]})]})})}},294:function(e,t,n){},295:function(e,t,n){"use strict";n.d(t,"a",(function(){return c}));var a=n(2),i=(n(0),n(18)),r=(n(296),n(26)),o=n(37);function c(e){var t=e.inputs?o.a.makeInputDivs(e.inputs,e.data.inputNames):[];return Object(a.jsx)("div",{children:Object(a.jsxs)("div",{className:"if-node",children:[Object(a.jsx)("div",{className:"deleteBtn",children:Object(a.jsx)(i.Button,{icon:"times",size:"small",onClick:function(){return o.a.deleteNode(e.data.parentSchema,e.id)}})}),Object(a.jsxs)("div",{className:"ports",children:[Object(a.jsx)("div",{className:"inputs",children:t}),Object(a.jsx)("div",{className:"content",children:e.content})]}),Object(a.jsxs)("div",{className:"buttons",children:[Object(a.jsx)("button",{className:"true-btn",onClick:function(){console.log("Clicked True button! (going to if schema)"),r.a.getIDE().setDisplaySchemaId("".concat(e.id,"if"))},children:"True"}),Object(a.jsx)("button",{className:"false-btn",onClick:function(){console.log("Clicked False button! (going to else schema)"),r.a.getIDE().setDisplaySchemaId("".concat(e.id,"else"))},children:"False"})]})]})})}},296:function(e,t,n){},297:function(e,t){},298:function(e,t,n){"use strict";n.d(t,"a",(function(){return c}));var a=n(2),i=n(18),r=(n(296),n(26)),o=n(37);function c(e){var t=e.inputs?o.a.makeInputDivs(e.inputs,e.data.inputNames):[];return Object(a.jsx)("div",{children:Object(a.jsxs)("div",{className:"while-node",children:[Object(a.jsx)("div",{className:"deleteBtn",children:Object(a.jsx)(i.Button,{icon:"times",size:"small",onClick:function(){return o.a.deleteNode(e.data.parentSchema,e.id)}})}),Object(a.jsxs)("div",{className:"ports",children:[Object(a.jsx)("div",{className:"inputs",children:t}),Object(a.jsx)("div",{className:"content",children:e.content})]}),Object(a.jsx)("div",{className:"buttons",children:Object(a.jsx)("button",{className:"loop-btn",onClick:function(){console.log("Clicked loop button!"),r.a.getIDE().setDisplaySchemaId("".concat(e.id,"while"))},children:"Loop"})})]})})}},299:function(e,t){},300:function(e,t,n){"use strict";n.d(t,"a",(function(){return r}));var a=n(3),i=n(26),r=function e(t,n,r,o,c,s,u,l){Object(a.a)(this,e),this.id=void 0,this.coordinates=void 0,this.content=void 0,this.inputs=void 0,this.outputs=void 0,this.data=void 0,this.render=void 0,this.blockType=void 0,this.constInputs=void 0,this.id=i.a.getID(),this.coordinates=n,this.content=t,this.data=u,this.render=l,this.blockType=c,this.constInputs=s,this.outputs=[];for(var d=0;d<o;d++){var h={id:this.id+"-output-"+d};this.outputs.push(h)}this.inputs=[];for(var v=0;v<r;v++){var f={id:this.id+"-input-"+v};this.inputs.push(f)}}},301:function(e,t,n){"use strict";n.d(t,"a",(function(){return c}));var a=n(3),i=n(4),r=n(5),o=n(13),c=function(e){Object(i.a)(n,e);var t=Object(r.a)(n);function n(e,i,r,c,s){return Object(a.a)(this,n),t.call(this,e,i,1,o.a.IF,r,c,s)}return n}(n(68).a)},302:function(e,t){},303:function(e,t,n){"use strict";n.d(t,"a",(function(){return c}));var a=n(3),i=n(4),r=n(5),o=n(13),c=function(e){Object(i.a)(n,e);var t=Object(r.a)(n);function n(e,i,r,c,s){return Object(a.a)(this,n),t.call(this,e,i,1,o.a.WHILE,r,c,s)}return n}(n(68).a)},314:function(e,t,n){},315:function(e,t,n){},37:function(e,t,n){"use strict";n.d(t,"a",(function(){return u}));var a=n(2),i=n(3),r=n(6),o=(n(294),n(0)),c=n.n(o),s=n(26),u=function(){function e(){Object(i.a)(this,e)}return Object(r.a)(e,null,[{key:"makeInputDivs",value:function(e,t){var n=[];if(e)for(var i=0;i<e.length;i++)n.push(Object(a.jsxs)("div",{className:"InputPortDiv",children:[c.a.cloneElement(e[i],{className:"port"}),t&&Object(a.jsx)("label",{children:t[i]})]},e[i].key+"div"));return n}},{key:"makeOutputDivs",value:function(e,t){var n=[];if(e)for(var i=0;i<e.length;i++)n.push(Object(a.jsxs)("div",{className:"OutputPortDiv",children:[t&&Object(a.jsx)("label",{children:t[i]}),c.a.cloneElement(e[i],{className:"port"})]},e[i].key+"div"));return n}},{key:"deleteNode",value:function(e,t){s.a.getIDE().schemaMethods.get(e).deleteNodeFromSchema(t)}}]),e}()},44:function(e,t,n){"use strict";var a=n(293);n.d(t,"CustomRender",(function(){return a.a}));var i=n(295);n.d(t,"IfRender",(function(){return i.a}));var r=n(297);n.o(r,"WhileRender")&&n.d(t,"WhileRender",(function(){return r.WhileRender}));var o=n(298);n.d(t,"WhileRender",(function(){return o.a}));n(37)},48:function(e,t,n){"use strict";n.d(t,"a",(function(){return c}));var a=n(3),i=n(4),r=n(5),o=n(126),c=function(e){Object(i.a)(n,e);var t=Object(r.a)(n);function n(e){var i;return Object(a.a)(this,n),(i=t.call(this,e)).name="InternalCompilerError",i}return n}(Object(o.a)(Error))},49:function(e,t,n){"use strict";n.d(t,"a",(function(){return l})),n.d(t,"b",(function(){return d})),n.d(t,"c",(function(){return p})),n.d(t,"d",(function(){return b})),n.d(t,"e",(function(){return m})),n.d(t,"f",(function(){return a})),n.d(t,"g",(function(){return O.a}));n(117);var a,i=n(3),r=n(6),o=n(4),c=n(5),s=n(16),u=n(17),l=function(e){Object(o.a)(n,e);var t=Object(c.a)(n);function n(e,a){var r;return Object(i.a)(this,n),(r=t.call(this,e)).shape=void 0,r.shape=a[0],r}return Object(r.a)(n,[{key:"evalBlock",value:function(e){var t=this.shape.evalBlock(e),n=e.get(t);if(!n)throw new s.a("This shape does not exist",this.id);return n.posX}}]),n}(u.a),d=function(e){Object(o.a)(n,e);var t=Object(c.a)(n);function n(e,a){var r;return Object(i.a)(this,n),(r=t.call(this,e)).shape=void 0,r.shape=a[0],r}return Object(r.a)(n,[{key:"evalBlock",value:function(e){var t=this.shape.evalBlock(e),n=e.get(t);if(!n)throw new s.a("This shape does not exist",this.id);return n.posY}}]),n}(u.a),h=(n(118),n(20)),v=n.n(h),f=n(22),p=function(e){Object(o.a)(n,e);var t=Object(c.a)(n);function n(e,a){var r;return Object(i.a)(this,n),(r=t.call(this,e)).shape=void 0,r.x=void 0,r.y=void 0,r.shape=a[0],r.x=a[1],r.y=a[2],r}return Object(r.a)(n,[{key:"evalBlock",value:v.a.mark((function e(t){var n,a,i,r;return v.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=String(this.shape.evalBlock(t)),a=t.get(n)){e.next=4;break}throw new s.a("This shape does not exist",this.id);case 4:if(i=Number(this.x.evalBlock(t)),r=Number(this.y.evalBlock(t)),!isNaN(i)&&!isNaN(r)){e.next=8;break}throw new s.a("Input not a number",this.id);case 8:return a.posX+=i,a.posY+=r,t.set(n,a),void(e.next=13);case 13:case"end":return e.stop()}}),e,this)}))}]),n}(f.a),b=function(e){Object(o.a)(n,e);var t=Object(c.a)(n);function n(e,a){var r;return Object(i.a)(this,n),(r=t.call(this,e)).shape=void 0,r.rot=void 0,r.shape=a[0],r.rot=a[1],r}return Object(r.a)(n,[{key:"evalBlock",value:v.a.mark((function e(t){var n,a,i;return v.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=String(this.shape.evalBlock(t)),a=t.get(n)){e.next=4;break}throw new s.a("This shape does not exist",this.id);case 4:if(i=Number(this.rot.evalBlock(t)),!isNaN(i)){e.next=7;break}throw new s.a("Input not a number",this.id);case 7:return a.rot+=i,t.set(n,a),void(e.next=11);case 11:case"end":return e.stop()}}),e,this)}))}]),n}(f.a),m=function(e){Object(o.a)(n,e);var t=Object(c.a)(n);function n(e,a){var r;return Object(i.a)(this,n),(r=t.call(this,e)).shape=void 0,r.x=void 0,r.y=void 0,r.shape=a[0],r.x=a[1],r.y=a[2],r}return Object(r.a)(n,[{key:"evalBlock",value:v.a.mark((function e(t){var n,a,i,r;return v.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=String(this.shape.evalBlock(t)),a=t.get(n)){e.next=4;break}throw new s.a("This shape does not exist",this.id);case 4:if(i=Number(this.x.evalBlock(t)),r=Number(this.y.evalBlock(t)),!isNaN(i)&&!isNaN(r)){e.next=8;break}throw new s.a("Input not a number",this.id);case 8:return a.scaleX*=i,a.scaleY*=r,t.set(n,a),void(e.next=13);case 13:case"end":return e.stop()}}),e,this)}))}]),n}(f.a);n(67);!function(e){e.BLACK="rgb(0,0,0)",e.WHITE="rgb(255,255,255)",e.GREY="rgb(155,155,155)",e.RED="rgb(255,0,0)",e.GREEN="rgb(0,255,0)",e.BLUE="rgb(0,0,255)",e.YELLOW="rgb(255,255,0)",e.PURPLE="rgb(128,0,128)",e.BROWN="rgb(110,60,34)",e.ORANGE="rgb(255,89,0)",e.PINK="rgb(255,0,255)"}(a||(a={}));var O=n(56)},56:function(e,t,n){"use strict";var a;n.d(t,"a",(function(){return a})),function(e){e.RECT="Rectangle",e.CIRCLE="Circle",e.TRIANGLE="Triangle",e.STAR="Star",e.HEART="Heart"}(a||(a={}))},638:function(e,t,n){},639:function(e,t,n){},640:function(e,t,n){"use strict";n.r(t);var a=n(2),i=n(0),r=n.n(i),o=n(39),c=n.n(o),s=(n(314),n(315),n(27)),u=n(26),l=n(18),d=n(20),h=n.n(d),v=n(24),f=n(72),p=n(305),b=n(3),m=n(6),O=n(48),j=n(22),k=!1,g=function(){function e(t,n){var a=this;Object(b.a)(this,e),this.subroutines=void 0,this.triggerDict=void 0,this.varEnv=void 0,this.triggeredIndexes=void 0,this.taskQueue=void 0,this.errorNotify=void 0,this.subroutines=t,this.triggerDict=n,this.varEnv=new Map,this.taskQueue=[],this.errorNotify=function(e){console.log("Unhandled Runtime Error")},this.triggeredIndexes=new Set,n.forEach((function(e){e.forEach((function(e){return a.triggeredIndexes.add(e)}))})),console.log("trigger map"),console.log(n),console.log("THERE ARE ".concat(this.subroutines.length," subroutines"))}return Object(m.a)(e,[{key:"trigger",value:function(e){var t,n=this;this.triggerDict.has(e)?(null===(t=this.triggerDict.get(e))||void 0===t||t.forEach((function(e){var t=n.subroutines[e];if(!(t instanceof j.a))throw new O.a("Subroutine not Void!");n.buildTaskQueue(t.evalBlock(n.varEnv),t.getLength())})),this.scheduleNextTask()):console.log("".concat(e," is not a defined trigger"))}},{key:"stop",value:function(){console.log("scheduling to stop!"),k=!0}},{key:"run",value:function(){var e=this;k=!1,this.taskQueue=[],this.varEnv=new Map,this.subroutines.filter((function(t,n){return!e.triggeredIndexes.has(n)})).forEach((function(t){if(!(t instanceof j.a))throw new O.a("Task is not a Void!");var n=t.evalBlock(e.varEnv);e.buildTaskQueue(n,t.getLength())})),this.scheduleNextTask()}},{key:"buildTaskQueue",value:function(e,t){this.taskQueue.push([e,t])}},{key:"eventLoop",value:function(e,t){var n=this;if(k)this.stopCleanup();else{var a;try{var i,r=0;do{i=e.next()}while(++r<t);a=i.done}catch(o){if(console.error(o),console.log("CAUGHT AN ERROR"),k=!0,this.taskQueue=[],"TeaBlocksError"!=o.name)throw console.log("UNHANDLED ERROR!!"),o;console.log("TEABLOCKS ERROR!!!"),this.errorNotify(o.message,o.id),console.log(o)}a?this.scheduleNextTask():window.requestAnimationFrame((function(a){return n.eventLoop(e,t)}))}}},{key:"scheduleNextTask",value:function(){var e=this,t=this.taskQueue.shift();if(null!=t){var n=Object(s.a)(t,2),a=n[0],i=n[1];window.requestAnimationFrame((function(t){return e.eventLoop(a,i)}))}}},{key:"stopCleanup",value:function(){this.varEnv=new Map,this.taskQueue=[]}}]),e}(),N=n(7);function y(){return(y=Object(p.a)(h.a.mark((function e(t){var n,a,i,r,o;return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:for(n=function(e){if(console.log("Entering Compile Tree"),e.hasBeenCompiled)throw new EvalError("Looping tree? (In Compiler)");if(e.hasBeenCompiled=!0,e.isInput){console.log("We an input (base case)");var t=N.b.apply(void 0,[e.nodeId,e.blockType].concat(Object(f.a)(e.constInputs))),a=new Set;return e.isTriggered&&(console.log("".concat(e.constInputs[0]," is this node's trigger")),a.add(e.constInputs[0])),[t,a]}if(e.blockType===N.a.IF||e.blockType===N.a.WHILE){console.log("IF BLOCK/ WHILE BLOCK");var i=e.children;console.log("Length of children: "+i.length);var r=new Set,o=i.map((function(e){return e.map((function(e){console.log("Compiling child");var t=n(e),a=Object(s.a)(t,2),i=a[0],o=a[1];return console.log("Done compiling child"),o.forEach((function(e){return r.add(e)})),i}))}));console.log("Done compiling children");var c=N.b.apply(void 0,[e.nodeId,e.blockType].concat(Object(f.a)(e.constInputs),[o]));return console.log("Returning"),[c,r]}var u=function(){console.log("We not input (recursive)");var t=Object(s.a)(e.children,1)[0];console.log("Length of children: "+t.length);var a,i=[],r=new Set,o=Object(v.a)(t);try{for(o.s();!(a=o.n()).done;){var c=a.value;console.log("Compiling child");var u=n(c),l=Object(s.a)(u,2),d=l[0],h=l[1];console.log("Done compiling child"),i.push(d),h.forEach((function(e){return r.add(e)}))}}catch(b){o.e(b)}finally{o.f()}e.isTriggered&&r.add(e.constInputs[0]),console.log("Done compiling children");var p=N.b.apply(void 0,[e.nodeId,e.blockType].concat(Object(f.a)(e.constInputs),[i]));return console.log("Returning"),{v:[p,r]}}();if("object"===typeof u)return u.v},a=Array(t.length),i=new Map,console.log("BEGINING COMPILING"),console.log("We have "+t.length+" trees"),r=function(e){console.log("COMPILING THIS NODE");var r=n(t[e]),o=Object(s.a)(r,2),c=o[0],u=o[1];console.log("DONE COMPILING THIS NODE"),a[e]=c,console.log("Trigset:"),console.log(u),u.forEach((function(t){var n;(console.log("Trig:"+t),i.has(t))?null===(n=i.get(t))||void 0===n||n.push(e):i.set(t,[e])}))},o=0;o<t.length;o++)r(o);return e.abrupt("return",new g(a,i));case 8:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var E=n(95),I=n(4),w=n(5),S=n(306),x=n(67),B=n(56),T=n(307),R=n(308),C=function(e){var t=e.draw,n=Object(R.a)(e,["draw"]),r=Object(i.useRef)(null);return Object(i.useEffect)((function(){var e,n=r.current,a=n.getContext("2d"),i=0;n.style.width="100%",n.style.height="100%",n.width=n.offsetWidth,n.height=n.offsetHeight;return function n(){i++,t(a,i),e=window.requestAnimationFrame(n)}(),function(){window.cancelAnimationFrame(e)}}),[t]),Object(a.jsx)("canvas",Object(T.a)({ref:r},n))},A=(n(638),function(e){Object(I.a)(n,e);var t=Object(w.a)(n);function n(e){var a;return Object(b.a)(this,n),(a=t.call(this,e)).program=void 0,a.inputStorage=void 0,console.log("--RUNTIME           Entered Runtime constructor"),a.state={inputs:[]},a.program=e.program,a.inputStorage=new Map,a.draw=a.draw.bind(Object(E.a)(a)),a.setup=a.setup.bind(Object(E.a)(a)),a}return Object(m.a)(n,[{key:"moveThing",value:function(e,t){if(e.started){var n={x:e.x,y:e.y};this.program.varEnv.set("&".concat(t),n),this.program.trigger("".concat(t))}}},{key:"setup",value:function(){var e=this;console.log("--RUNTIME           called setup !!!!",this.program.varEnv,this.program.triggerDict,"asdasd"),this.program.triggerDict.size!==this.state.inputs.length&&this.program.varEnv.forEach((function(t,n){var i=n.substring(1);if("joy"!==t.type||e.inputStorage.has(i))t.type;else{console.log("--RUNTIME           ",t);var r=Object(a.jsx)("div",{className:i,style:{position:"absolute",left:t.x,bottom:t.y},children:Object(a.jsx)(S.Joystick,{size:100,baseColor:"#7c7cf3",stickColor:"#efefef",move:function(t){e.handleMove(t,i)},stop:function(t){e.handleStop(t,i)},start:function(t){e.handleStart(t,i)}})},i);e.inputStorage.set(i,{started:!1,x:0,y:0}),e.setState((function(e){return{inputs:[].concat(Object(f.a)(e.inputs),[r])}})),e.program.varEnv.set("&".concat(i),{x:0,y:0})}}))}},{key:"componentDidMount",value:function(){this.setup()}},{key:"draw",value:function(e,t){var n=this;e.clearRect(0,0,e.canvas.width,e.canvas.height),this.state.inputs.length<this.program.triggerDict.size&&this.setup(),this.inputStorage.forEach((function(e,t){n.moveThing(e,t)})),this.program.subroutines.length>0&&this.program.varEnv.forEach((function(t,a){switch(t.constructor){case x.a:n.addShape(e,t)}}))}},{key:"handleMove",value:function(e,t){if(e.x&&e.y&&this.inputStorage.get(t)){var n,a={started:(null===(n=this.inputStorage.get(t))||void 0===n?void 0:n.started)||!0,x:e.x/50,y:e.y/50*-1};this.inputStorage.set(t,a)}}},{key:"handleStop",value:function(e,t){this.inputStorage.set(t,{started:!1,x:0,y:0})}},{key:"handleStart",value:function(e,t){if(this.inputStorage.get(t)){var n,a,i={started:!0,x:(null===(n=this.inputStorage.get(t))||void 0===n?void 0:n.x)||0,y:(null===(a=this.inputStorage.get(t))||void 0===a?void 0:a.y)||0};this.inputStorage.set(t,i)}}},{key:"addShape",value:function(e,t){var n=t.type;switch(e.fillStyle=t.color,n){case B.a.RECT:this.addRect(e,t.posX,t.posY,t.scaleX,t.scaleY);break;case B.a.CIRCLE:case B.a.TRIANGLE:case B.a.HEART:case B.a.STAR:}}},{key:"addRect",value:function(e,t,n,a,i){e.beginPath(),e.rect(t,n,a,i),e.fill()}},{key:"componentWillUnmount",value:function(){var e=document.getElementById("controller");e&&c.a.unmountComponentAtNode(e)}},{key:"render",value:function(){return Object(a.jsx)("div",{className:"runtime-section",children:Object(a.jsxs)("div",{className:"runtime-output",children:[Object(a.jsx)(C,{draw:this.draw}),Object(a.jsx)("div",{className:"controller",children:this.state.inputs})]})})}}]),n}(i.Component)),D=n(13),_=function e(t,n,a,i){Object(b.a)(this,e),this.nodeId=void 0,this.children=void 0,this.blockType=void 0,this.constInputs=void 0,this.hasBeenCompiled=void 0,this.isInput=void 0,this.isTriggered=void 0,this.nodeId=t,this.blockType=n,this.children=[],this.hasBeenCompiled=!1,this.isInput=i,this.constInputs=a,this.isTriggered=n===D.a.BTN_STATUS||n===D.a.JOY_X||n===D.a.JOY_Y},L=n(120),M=500;function G(e){e.sort((function(e,t){return e.coordinates[0]-t.coordinates[0]}));var t,n=[],a=[[[0,20],0]],i=Object(v.a)(e);try{for(i.s();!(t=i.n()).done;){var r,o=t.value,c=o.coordinates[0],u=Object(v.a)(a);try{for(u.s();!(r=u.n()).done;){var l=Object(s.a)(r.value,2),d=l[0],h=l[1];if(d[0]<=c&&c<d[1]){n[h].push(o);break}}}catch(f){u.e(f)}finally{u.f()}a.push([[c-5,c+20],h+1]),n[h+1]=[o]}}catch(f){i.e(f)}finally{i.f()}return n.map((function(e){return e.sort((function(e,t){return e.coordinates[1]-t.coordinates[1]})),e})),n.flat()}var Y={sortRoots:G,precompile:function(e){console.log(e);var t,n=e.get("main");if(console.log(n),!n)throw Error("Main schema must be in schemas");function a(e){var t=[];if(null==e.links)return t;var n=G(t=e.nodes.filter((function(e){return"isRoot"in e})).filter((function(e,t,n){return n.indexOf(e)===t})));return console.log("roots"),console.log(n),n}function i(n){var c=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,s=arguments.length>2&&void 0!==arguments[2]?arguments[2]:t;if(c>=M)throw new Error("Looping Tree?\nReached max recursion depth: 500");if(c+=1,o(n)){var u=new _(n.id,n.blockType,n.constInputs,!0);return console.log("Triggered: ".concat(u.isTriggered)),u}if(n.blockType===D.a.IF){var l=e.get(n.id+"if");if(!l)throw Error("Encountered If Node without schema");var d,h=a(l),f=[],p=Object(v.a)(h);try{for(p.s();!(d=p.n()).done;){var b=d.value,m=i(b,c,l);f.push(m)}}catch(H){p.e(H)}finally{p.f()}var O=e.get(n.id+"else");if(!O)throw Error("Encountered If Node without schema");var j,k=a(O),g=[],N=Object(v.a)(k);try{for(N.s();!(j=N.n()).done;){var y=j.value,E=i(y,c,O);g.push(E)}}catch(H){N.e(H)}finally{N.f()}var I=r(n,s),w=I.map((function(e){return i(e,c,s)})),S=new _(n.id,D.a.IF,[],!1);return S.children=[w,f,g],S}if(n.blockType===D.a.WHILE){var x=e.get(n.id+"while");if(!x)throw Error("Encountered Nested Node without schema");var B,T=a(x),R=[],C=Object(v.a)(T);try{for(C.s();!(B=C.n()).done;){var A=B.value,L=i(A,c,x);R.push(L)}}catch(H){C.e(H)}finally{C.f()}var G=r(n,s);console.log("my children before precompiling: "),console.log(G);var Y=G.map((function(e){return i(e,c,s)})),F=new _(n.id,D.a.WHILE,[],!1);return F.children=[Y,R],F}var P=r(n,s);console.log("my children before precompiling: "),console.log(P);var V=P.map((function(e){return i(e,c,s)}));console.log("my children after precompiling: "),console.log(V);var X=new _(n.id,n.blockType,n.constInputs,!1);return X.children=[V],console.log("value of comp's children: "),console.log(X.children),X}function r(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:t;if(!n.nodes.includes(e))throw Error("This node is not in schema");console.log("GETTING CHILDREN!");var a=[];if(null==e.inputs)return[];var i=e.inputs.map((function(e){return e.id}));if(console.log(i),i.sort(),console.log("port ids"),console.log(i),null!=i){var r,o=i.map((function(e){var t;return null===(t=n.links.find((function(t){return t.input===e})))||void 0===t?void 0:t.output})),c=Object(v.a)(o);try{var s=function(){var e=r.value;if(console.log("Found a child"),null==e)throw new Error("Null port id!");var t=e.substring(0,e.indexOf("-output")),i=n.nodes.find((function(e){return e.id===t}));null!=i&&a.push(i)};for(c.s();!(r=c.n()).done;)s()}catch(u){c.e(u)}finally{c.f()}}return a}function o(e){return e instanceof L.a}var c=a(t=n).map((function(e){return i(e)}));return console.log("Done precompiling! here's what we have:"),console.log(c),c}},F=n(44),P=function(){function e(){Object(b.a)(this,e)}return Object(m.a)(e,null,[{key:"serialize",value:function(){var e={ids:[],schemas:[],nodeIDStart:u.a.getID()};return u.a.getIDE().validatedSchemas.forEach((function(t,n){e.ids.push(n),e.schemas.push(t)})),JSON.stringify(e)}},{key:"deserialize",value:function(e){for(var t=JSON.parse(e),n=new Map,a=0;a<t.ids.length;a++){var i=t.schemas[a];i.nodes.forEach((function(e){switch(e.blockType){case N.a.IF:e.render=F.IfRender;break;case N.a.WHILE:e.render=F.WhileRender;break;default:e.render=F.CustomRender}})),n.set(t.ids[a],i)}return[n,t.nodeIDStart]}}]),e}(),V=n(16),X=(n(639),new g([],new Map));function H(){var e=Object(i.useState)(X),t=Object(s.a)(e,2),n=t[0],r=t[1];function o(){console.log("Button compile and run"),u.a.getIDE().unflagNodes(),function(e){return y.apply(this,arguments)}(Y.precompile(u.a.getIDE().validatedSchemas)).then((function(e){e.errorNotify=d,r(e)})).catch((function(e){console.error(e)}))}function d(e){for(var t,n=arguments.length,a=new Array(n>1?n-1:0),i=1;i<n;i++)a[i-1]=arguments[i];(t=u.a.getIDE()).flagNodes.apply(t,a),u.a.getIDE().redrawDiagram()}return Object(i.useEffect)((function(){u.a.getIDE().renderDiagram()}),[]),Object(i.useEffect)((function(){var e=document.getElementById("Runtime");return e&&(console.log("UNMOUNTING RUNTIME"),c.a.unmountComponentAtNode(e)),n!==X&&(console.log("MOUNTING RUNTIME"),c.a.render(Object(a.jsx)(A,{program:n}),document.getElementById("Runtime"))),function(){console.log("Cleanup?"),n.stop()}}),[n]),Object(a.jsxs)("div",{className:"grid-container",children:[Object(a.jsxs)("div",{className:"Ide",children:[Object(a.jsx)("div",{id:"ide"}),Object(a.jsx)(l.Button,{color:"primary",icon:"home",onClick:function(){u.a.getIDE().setDisplaySchemaId("main")},className:"compile-btn",children:" Go to Main"}),Object(a.jsx)(l.Button,{color:"primary",icon:"hammer",onClick:function(){o()},className:"compile-btn",children:" Build"}),Object(a.jsx)(l.Button,{color:"primary",icon:"play",onClick:function(){return function(){n.varEnv.set("&joy-joystick",{x:0,y:0}),console.log("Run Program");try{n.run()}catch(e){if(!(e instanceof V.a))throw e;console.error(e),u.a.getIDE().flagNodes(e.id)}}()},className:"compile-btn",children:" Run"}),Object(a.jsx)(l.Button,{color:"primary",icon:"stop",onClick:n.stop,className:"compile-btn",children:" Stop"}),Object(a.jsx)(l.Button,{color:"primary",icon:"save",onClick:function(){console.log(P.serialize())},className:"compile-btn",children:" Save"}),Object(a.jsx)(l.Button,{color:"primary",icon:"upload",onClick:function(){var e=prompt("Paste the JSON for validatedSchemas:",""),t=P.deserialize(e||""),n=Object(s.a)(t,2),a=n[0],i=n[1];u.a.getIDE().loadSchemas(a,i)},className:"compile-btn",children:" Load"})]}),Object(a.jsx)("div",{className:"Runtime",id:"Runtime"})]})}var W=function(){return Object(a.jsxs)("div",{className:"App",children:[Object(a.jsx)("h1",{children:"TeaBlocks Demo (WIP)"}),Object(a.jsx)(H,{})]})},U=function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,641)).then((function(t){var n=t.getCLS,a=t.getFID,i=t.getFCP,r=t.getLCP,o=t.getTTFB;n(e),a(e),i(e),r(e),o(e)}))};c.a.render(Object(a.jsx)(r.a.StrictMode,{children:Object(a.jsx)(W,{})}),document.getElementById("root")),U()},67:function(e,t,n){"use strict";n.d(t,"a",(function(){return i}));var a=n(3),i=function e(t,n,i,r,o,c,s,u){Object(a.a)(this,e),this.shapeName=void 0,this.posX=void 0,this.posY=void 0,this.scaleX=void 0,this.scaleY=void 0,this.rot=void 0,this.type=void 0,this.color=void 0,this.shapeName=t,this.posX=r,this.posY=o,this.scaleX=c,this.scaleY=s,this.rot=u,this.type=n,this.color=i}},68:function(e,t,n){"use strict";n.d(t,"a",(function(){return s}));var a=n(3),i=n(4),r=n(5),o=n(119),c=n(26),s=function(e){Object(i.a)(n,e);var t=Object(r.a)(n);function n(e,i,r,o,s,u,l){var d;Object(a.a)(this,n),(d=t.call(this)).id=void 0,d.coordinates=void 0,d.content=void 0,d.inputs=void 0,d.data=void 0,d.render=void 0,d.blockType=void 0,d.constInputs=void 0,d.id=c.a.getID(),d.coordinates=i,d.content=e,d.data=u,d.render=l,d.blockType=o,d.constInputs=s,console.log("Outputs id: "+d.id),d.inputs=[];for(var h=0;h<r;h++){var v="".concat(d.id,"-input-").concat(h);console.log("port id: "+v);var f={id:v};d.inputs.push(f)}return d}return n}(o.a)},7:function(e,t,n){"use strict";n.d(t,"a",(function(){return a.a})),n.d(t,"b",(function(){return Q}));var a=n(13),i=n(27),r=n(127),o=n(20),c=n.n(o),s=n(3),u=n(6),l=n(4),d=n(5),h=function e(t,n,a,i){Object(s.a)(this,e),this.displayName=void 0,this.x=void 0,this.y=void 0,this.type=void 0,this.displayName=t,this.x=n,this.y=a,this.type=i},v=n(16),f=n(22),p=function(e){Object(l.a)(n,e);var t=Object(d.a)(n);function n(e,a,i,r){var o;return Object(s.a)(this,n),(o=t.call(this,e)).x=void 0,o.y=void 0,o.elemName=void 0,o.type=void 0,o.type=a,o.elemName=i,o.x=r[0],o.y=r[1],o}return Object(u.a)(n,[{key:"evalBlock",value:c.a.mark((function e(t){var n,a,i;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=Number(this.x.evalBlock(t)),a=Number(this.y.evalBlock(t)),!isNaN(n)&&!isNaN(a)){e.next=4;break}throw new v.a("Position must be a number",this.id);case 4:return i=new h(this.elemName,n,a,this.type),t.set("$"+this.elemName,i),void(e.next=8);case 8:case"end":return e.stop()}}),e,this)}))}]),n}(f.a),b=function(e){Object(l.a)(n,e);var t=Object(d.a)(n);function n(e,a){var i;return Object(s.a)(this,n),(i=t.call(this,e)).input=void 0,console.log("this is the input",a),i.input=a,i}return Object(u.a)(n,[{key:"evalBlock",value:c.a.mark((function e(t){return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.input.forEach((function(e){var n=e.evalBlock(t);console.log(n)})),void(e.next=3);case 3:case"end":return e.stop()}}),e,this)}))}]),n}(f.a),m=n(17),O=function(e){Object(l.a)(n,e);var t=Object(d.a)(n);function n(e,a){var i;return Object(s.a)(this,n),(i=t.call(this,e)).leftSide=void 0,i.rightSide=void 0,i.leftSide=a[0],i.rightSide=a[1],i}return Object(u.a)(n,[{key:"evalBlock",value:function(e){return this.leftSide.evalBlock(e)==this.rightSide.evalBlock(e)}}]),n}(m.a),j=function(e){Object(l.a)(n,e);var t=Object(d.a)(n);function n(e,a){var i;return Object(s.a)(this,n),(i=t.call(this,e)).leftSide=void 0,i.rightSide=void 0,i.leftSide=a[0],i.rightSide=a[1],i}return Object(u.a)(n,[{key:"evalBlock",value:function(e){return this.leftSide.evalBlock(e)>=this.rightSide.evalBlock(e)}}]),n}(m.a),k=function(e){Object(l.a)(n,e);var t=Object(d.a)(n);function n(e,a){var i;return Object(s.a)(this,n),(i=t.call(this,e)).leftSide=void 0,i.rightSide=void 0,i.leftSide=a[0],i.rightSide=a[1],i}return Object(u.a)(n,[{key:"evalBlock",value:function(e){return this.leftSide.evalBlock(e)>this.rightSide.evalBlock(e)}}]),n}(m.a),g=function(e){Object(l.a)(n,e);var t=Object(d.a)(n);function n(e,a){var i;return Object(s.a)(this,n),(i=t.call(this,e)).leftSide=void 0,i.rightSide=void 0,i.leftSide=a[0],i.rightSide=a[1],i}return Object(u.a)(n,[{key:"evalBlock",value:function(e){return this.leftSide.evalBlock(e)<=this.rightSide.evalBlock(e)}}]),n}(m.a),N=function(e){Object(l.a)(n,e);var t=Object(d.a)(n);function n(e,a){var i;return Object(s.a)(this,n),(i=t.call(this,e)).leftSide=void 0,i.rightSide=void 0,i.leftSide=a[0],i.rightSide=a[1],i}return Object(u.a)(n,[{key:"evalBlock",value:function(e){return this.leftSide.evalBlock(e)<this.rightSide.evalBlock(e)}}]),n}(m.a),y=n(24),E=function(e){Object(l.a)(n,e);var t=Object(d.a)(n);function n(e,a){var i;return Object(s.a)(this,n),(i=t.call(this,e)).inputs=void 0,i.inputs=a,i}return Object(u.a)(n,[{key:"evalBlock",value:function(e){var t,n=Object(y.a)(this.inputs);try{for(n.s();!(t=n.n()).done;){var a=t.value;if(!Boolean(a.evalBlock(e)))return!1}}catch(i){n.e(i)}finally{n.f()}return!0}}]),n}(m.a),I=function(e){Object(l.a)(n,e);var t=Object(d.a)(n);function n(e,a){var i;return Object(s.a)(this,n),(i=t.call(this,e)).bool=void 0,i.bool=a[0],i}return Object(u.a)(n,[{key:"evalBlock",value:function(e){return!Boolean(this.bool.evalBlock(e))}}]),n}(m.a),w=function(e){Object(l.a)(n,e);var t=Object(d.a)(n);function n(e,a){var i;return Object(s.a)(this,n),(i=t.call(this,e)).inputs=void 0,i.inputs=a,i}return Object(u.a)(n,[{key:"evalBlock",value:function(e){var t,n=Object(y.a)(this.inputs);try{for(n.s();!(t=n.n()).done;){var a=t.value;if(Boolean(a.evalBlock(e)))return!0}}catch(i){n.e(i)}finally{n.f()}return!1}}]),n}(m.a),S=function(e){Object(l.a)(n,e);var t=Object(d.a)(n);function n(e,a){var i;return Object(s.a)(this,n),(i=t.call(this,e)).inputs=void 0,i.inputs=a,i}return Object(u.a)(n,[{key:"evalBlock",value:function(e){var t=this,n=Number(this.inputs[0].evalBlock(e));return 1===this.inputs.length||0===n||isNaN(n)||this.inputs.slice(1).forEach((function(a){var i=Number(a.evalBlock(e));if(isNaN(i))throw new v.a("Input is not a number",t.id);if(0===i)throw new v.a("Can't divide by zero.",t.id);n/=i})),n}}]),n}(m.a),x=function(e){Object(l.a)(n,e);var t=Object(d.a)(n);function n(e,a){var i;return Object(s.a)(this,n),(i=t.call(this,e)).inputs=void 0,i.inputs=a,i}return Object(u.a)(n,[{key:"evalBlock",value:function(e){var t=this,n=Number(this.inputs[0].evalBlock(e));if(isNaN(n))throw new v.a("Inputs must be numbers",this.id);return 1===this.inputs.length||1===n||0===n||this.inputs.slice(1).forEach((function(a){var i=Number(a.evalBlock(e));if(isNaN(i))throw new v.a("Inputs must be numbers",t.id);if(0===i)return 1;n=Math.pow(n,i)})),n}}]),n}(m.a),B=function(e){Object(l.a)(n,e);var t=Object(d.a)(n);function n(e,a){var i;return Object(s.a)(this,n),(i=t.call(this,e)).inputs=void 0,i.inputs=a,i}return Object(u.a)(n,[{key:"evalBlock",value:function(e){var t=this,n=Number(this.inputs[0].evalBlock(e));if(1===this.inputs.length)return n;if(isNaN(n))throw new v.a("Inputs Must be Number",this.id);return this.inputs.slice(1).forEach((function(a){var i=Number(a.evalBlock(e));if(isNaN(i))throw new v.a("Inputs must be numbers",t.id);n%=i})),n}}]),n}(m.a),T=function(e){Object(l.a)(n,e);var t=Object(d.a)(n);function n(e,a){var i;return Object(s.a)(this,n),(i=t.call(this,e)).operands=void 0,i.operands=a,i}return Object(u.a)(n,[{key:"evalBlock",value:function(e){var t,n=1,a=Object(y.a)(this.operands);try{for(a.s();!(t=a.n()).done;){var i=t.value,r=Number(i.evalBlock(e));if(isNaN(r))throw new v.a("Input not a number",this.id);if(0===r)return 0;n*=r}}catch(o){a.e(o)}finally{a.f()}return n}}]),n}(m.a),R=function(e){Object(l.a)(n,e);var t=Object(d.a)(n);function n(e,a){var i;return Object(s.a)(this,n),(i=t.call(this,e)).inputs=void 0,i.inputs=a,i}return Object(u.a)(n,[{key:"evalBlock",value:function(e){var t=Number(this.inputs[0].evalBlock(e));if(isNaN(t))throw new v.a("Input not a number",this.id);var n,a=Object(y.a)(this.inputs.slice(1));try{for(a.s();!(n=a.n()).done;){var i=n.value,r=Number(i.evalBlock(e));if(isNaN(r))throw new v.a("Input not a number",this.id);t-=r}}catch(o){a.e(o)}finally{a.f()}return t}}]),n}(m.a),C=function(e){Object(l.a)(n,e);var t=Object(d.a)(n);function n(e,a){var i;return Object(s.a)(this,n),(i=t.call(this,e)).operands=void 0,i.operands=a,i}return Object(u.a)(n,[{key:"evalBlock",value:function(e){var t,n="",a=!1,i=Object(y.a)(this.operands);try{for(i.s();!(t=i.n()).done;){var r=t.value;console.log(r);var o=r.evalBlock(e),c=Number(o);n=(a=a||isNaN(c))?String(n)+String(o):Number(n)+c}}catch(s){i.e(s)}finally{i.f()}return n}}]),n}(m.a),A=function(e){Object(l.a)(n,e);var t=Object(d.a)(n);function n(e,a){var i;return Object(s.a)(this,n),(i=t.call(this,e)).condition=void 0,i.tValue=void 0,i.fValue=void 0,i.condition=a[0],i.tValue=a[1],i.fValue=a[2],i}return Object(u.a)(n,[{key:"evalBlock",value:function(e){return Boolean(this.condition.evalBlock(e))?this.tValue.evalBlock(e):this.fValue.evalBlock(e)}}]),n}(m.a),D=n(49),_=n(117),L=n(118),M=n(48),G=function(e){Object(l.a)(n,e);var t=Object(d.a)(n);function n(e,a,i){var r;return Object(s.a)(this,n),(r=t.call(this,e)).varName=void 0,r.value=void 0,r.varName=a,r.value=i[0],r}return Object(u.a)(n,[{key:"evalBlock",value:c.a.mark((function e(t){var n;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!this.varName.includes("$")&&!this.varName.includes("&")){e.next=2;break}throw new v.a("Variable name contains illegal character",this.id);case 2:return n=this.value.evalBlock(t),t.set(this.varName,n),void(e.next=6);case 6:case"end":return e.stop()}}),e,this)}))}]),n}(f.a),Y=function(e){Object(l.a)(n,e);var t=Object(d.a)(n);function n(e,a,i,r,o,c){var u;Object(s.a)(this,n),(u=t.call(this,e)).counterName=void 0,u.initialValue=void 0,u.condition=void 0,u.incrementValue=void 0,u.nodes=void 0,u.len=void 0,u.counterName=a,u.initialValue=i[0],u.condition=r[0],u.incrementValue=o[0],u.nodes=c,u.len=0;var l,d=Object(y.a)(c);try{for(d.s();!(l=d.n()).done;){var h=l.value;u.len+=h.getLength()}}catch(v){d.e(v)}finally{d.f()}return u}return Object(u.a)(n,[{key:"evalBlock",value:c.a.mark((function e(t){var n,a,i,r,o,s;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:new G(this.id,this.counterName,[this.initialValue]).evalBlock(t);case 2:if(Boolean(this.condition.evalBlock(t))){e.next=6;break}return e.abrupt("return");case 6:n=Object(y.a)(this.nodes),e.prev=7,n.s();case 9:if((a=n.n()).done){e.next=21;break}if((i=a.value)instanceof f.a){e.next=13;break}throw new M.a("Loop body must be void");case 13:r=i.evalBlock(t),o=void 0;case 15:return o=r.next(),void(e.next=18);case 18:if(!o.done){e.next=15;break}case 19:e.next=9;break;case 21:e.next=26;break;case 23:e.prev=23,e.t0=e.catch(7),n.e(e.t0);case 26:return e.prev=26,n.f(),e.finish(26);case 29:s=this.incrementValue.evalBlock(t),t.set(this.counterName,t.get(this.counterName)+s),e.next=2;break;case 33:case"end":return e.stop()}}),e,this,[[7,23,26,29]])}))},{key:"getLength",value:function(){return this.len}}]),n}(f.a),F=function(e){Object(l.a)(n,e);var t=Object(d.a)(n);function n(e,a,i,r){var o;Object(s.a)(this,n),(o=t.call(this,e)).condition=void 0,o.then=void 0,o.otherwise=void 0,o.len=void 0,o.condition=a,o.then=i,o.otherwise=r;var c,u=0,l=0,d=Object(y.a)(i);try{for(d.s();!(c=d.n()).done;){u+=c.value.getLength()}}catch(f){d.e(f)}finally{d.f()}var h,v=Object(y.a)(r);try{for(v.s();!(h=v.n()).done;){l+=h.value.getLength()}}catch(f){v.e(f)}finally{v.f()}return o.len=Math.max(u,l),o}return Object(u.a)(n,[{key:"evalBlock",value:c.a.mark((function e(t){var n,a,i,r,o,s,u,l,d;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n=this.condition,a=new E(this.id,n),i=a.evalBlock(t),r=i?this.then:this.otherwise,o=Object(y.a)(r),e.prev=5,o.s();case 7:if((s=o.n()).done){e.next=19;break}if((u=s.value)instanceof f.a){e.next=11;break}throw new M.a("Loop body must be void");case 11:l=u.evalBlock(t),d=void 0;case 13:return d=l.next(),void(e.next=16);case 16:if(!d.done){e.next=13;break}case 17:e.next=7;break;case 19:e.next=24;break;case 21:e.prev=21,e.t0=e.catch(5),o.e(e.t0);case 24:return e.prev=24,o.f(),e.finish(24);case 27:return e.abrupt("return");case 28:case"end":return e.stop()}}),e,this,[[5,21,24,27]])}))},{key:"getLength",value:function(){return this.len}}]),n}(f.a),P=function(e){Object(l.a)(n,e);var t=Object(d.a)(n);function n(e,a,i){var r;Object(s.a)(this,n),(r=t.call(this,e)).conditions=void 0,r.blocks=void 0,r.len=void 0,r.conditions=a,r.blocks=i,r.len=0;var o,c=Object(y.a)(i);try{for(c.s();!(o=c.n()).done;){var u=o.value;r.len+=u.getLength()}}catch(l){c.e(l)}finally{c.f()}return r}return Object(u.a)(n,[{key:"evalBlock",value:c.a.mark((function e(t){var n,a,i,r,o,s;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=new E(this.id,this.conditions),n.evalBlock(t)){e.next=5;break}return e.abrupt("return");case 5:a=Object(y.a)(this.blocks),e.prev=6,a.s();case 8:if((i=a.n()).done){e.next=20;break}if((r=i.value)instanceof f.a){e.next=12;break}throw new M.a("Loop body must be void");case 12:o=r.evalBlock(t),s=void 0;case 14:return s=o.next(),void(e.next=17);case 17:if(!s.done){e.next=14;break}case 18:e.next=8;break;case 20:e.next=25;break;case 22:e.prev=22,e.t0=e.catch(6),a.e(e.t0);case 25:return e.prev=25,a.f(),e.finish(25);case 28:e.next=0;break;case 30:case"end":return e.stop()}}),e,this,[[6,22,25,28]])}))},{key:"getLength",value:function(){return this.len}}]),n}(f.a),V=function(e){Object(l.a)(n,e);var t=Object(d.a)(n);function n(e,a){var i;return Object(s.a)(this,n),(i=t.call(this,e)).value=void 0,i.value=a,i}return Object(u.a)(n,[{key:"evalBlock",value:function(e){return this.value}}]),n}(m.a),X=function(e){Object(l.a)(n,e);var t=Object(d.a)(n);function n(e,a){return Object(s.a)(this,n),t.call(this,e,a,[new V(e,[])])}return n}(G),H=function(e){Object(l.a)(n,e);var t=Object(d.a)(n);function n(e,a,i){var r;return Object(s.a)(this,n),(r=t.call(this,e)).index=void 0,r.arrName=void 0,r.arrName=a,r.index=i[0],r}return Object(u.a)(n,[{key:"evalBlock",value:function(e){var t=e.get(this.arrName);if(null==t)throw new v.a("Array does not exist",this.id);var n=Number(this.index.evalBlock(e));if(isNaN(n))throw new v.a("Index is not a number",this.id);var a=t[n];if(null==a)throw new v.a("Nothing at index ".concat(n),this.id);return a}}]),n}(m.a),W=function(e){Object(l.a)(n,e);var t=Object(d.a)(n);function n(e,a,i){var r;return Object(s.a)(this,n),(r=t.call(this,e)).arrName=void 0,r.index=void 0,r.value=void 0,r.arrName=a,r.index=i[0],r.value=i[1],r}return Object(u.a)(n,[{key:"evalBlock",value:c.a.mark((function e(t){var n,a,i;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=this.value.evalBlock(this.value.evalBlock(t)),null!=(a=t.get(this.arrName))){e.next=4;break}throw new v.a("Array does not exist",this.id);case 4:if(i=Number(this.index.evalBlock(t)),!isNaN(i)){e.next=7;break}throw new v.a("Index is not a number",this.id);case 7:return a[i]=n,t.set(this.arrName,a),void(e.next=11);case 11:case"end":return e.stop()}}),e,this)}))}]),n}(f.a),U=function(e){Object(l.a)(n,e);var t=Object(d.a)(n);function n(e,a){var i;return Object(s.a)(this,n),(i=t.call(this,e)).varName=void 0,i.varName=a,i}return Object(u.a)(n,[{key:"evalBlock",value:c.a.mark((function e(t){return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.has(this.varName)&&t.delete(this.varName),void(e.next=3);case 3:case"end":return e.stop()}}),e,this)}))}]),n}(f.a),J=function(e){Object(l.a)(n,e);var t=Object(d.a)(n);function n(e,a){var i;return Object(s.a)(this,n),(i=t.call(this,e)).varName=void 0,i.varName=a,i}return Object(u.a)(n,[{key:"evalBlock",value:function(e){if(this.varName.includes("$")||this.varName.includes("&"))throw new v.a("Variable name contains illegal character",this.id);if(!e.has(this.varName))throw new v.a("Variable "+this.varName+" does not exist",this.id);return e.get(this.varName)}}]),n}(m.a);function Q(e,t){for(var n,o,c,s,u,l=arguments.length,d=new Array(l>2?l-2:0),h=2;h<l;h++)d[h-2]=arguments[h];switch(t){case a.a.CLB:return n=d[0],new b(e,n);case a.a.SUM:return n=d[0],new C(e,n);case a.a.PROD:return n=d[0],new T(e,n);case a.a.SUBTRACT:return n=d[0],new R(e,n);case a.a.MOD:return n=d[0],new B(e,n);case a.a.EXP:return n=d[0],new x(e,n);case a.a.DIV:return n=d[0],new S(e,n);case a.a.CONST:return n=d[0],new V(e,n);case a.a.VAR_ASSIGN:return n=d[0],o=d[1],new G(e,n,o);case a.a.VAR_RETRIEVE:return n=d[0],new J(e,n);case a.a.DELETE:return n=d[0],new U(e,n);case a.a.TERNARY:return n=d[0],new A(e,n);case a.a.AND:return n=d[0],new E(e,n);case a.a.OR:return n=d[0],new w(e,n);case a.a.NOT:return n=d[0],new I(e,n);case a.a.EQ:return n=d[0],new O(e,n);case a.a.GEQ:return n=d[0],new j(e,n);case a.a.GT:return n=d[0],new k(e,n);case a.a.LEQ:return n=d[0],new g(e,n);case a.a.LT:return n=d[0],new N(e,n);case a.a.WHILE:var v=Object(i.a)(d[0],2);return n=v[0],o=v[1],new P(e,n,o);case a.a.IF:console.log(d);var f=Object(i.a)(d[0],3);return n=f[0],o=f[1],c=f[2],console.log(n),console.log(o),console.log(c),new F(e,n,o,c);case a.a.FOR:return n=d[0],o=d[1],c=d[2],s=d[3],u=d[4],new Y(e,n,o,c,s,u);case a.a.MAKE_SHAPE:return n=d[0],o=d[1],c=d[2],new L.a(e,n,o,c);case a.a.MOVE_SHAPE:return n=d[0],new D.c(e,n);case a.a.SCALE_SHAPE:return n=d[0],new D.e(e,n);case a.a.ROTATE_SHAPE:return n=d[0],new D.d(e,n);case a.a.GET_SHAPE:return n=d[0],new _.a(e,n);case a.a.JOY_X:return n=d[0],new r.JoyXStatusBlock(e,n);case a.a.JOY_Y:return n=d[0],new r.JoyYStatusBlock(e,n);case a.a.BTN_STATUS:return n=d[0],new r.ButtonStatusBlock(e,n);case a.a.ARR_CREATE:return n=d[0],new X(e,n);case a.a.ARR_SET_IX:return n=d[0],o=d[1],new W(e,n,o);case a.a.ARR_GET_IX:return n=d[0],o=d[1],new H(e,n,o);case a.a.MAKE_CONTROL_ELEM:return n=d[0],o=d[1],c=d[2],new p(e,n,o,c);case a.a.GET_X:return n=d[0],new D.a(e,n);case a.a.GET_Y:return n=d[0],new D.b(e,n);default:throw new EvalError("Entered BlockType is not yet supported in BlockFactory")}}},73:function(e,t,n){"use strict";var a=n(299);n.o(a,"FunctionNode")&&n.d(t,"FunctionNode",(function(){return a.FunctionNode})),n.o(a,"IfNode")&&n.d(t,"IfNode",(function(){return a.IfNode})),n.o(a,"InputNode")&&n.d(t,"InputNode",(function(){return a.InputNode})),n.o(a,"OutputNode")&&n.d(t,"OutputNode",(function(){return a.OutputNode})),n.o(a,"WhileNode")&&n.d(t,"WhileNode",(function(){return a.WhileNode}));var i=n(300);n.d(t,"FunctionNode",(function(){return i.a}));n(119);var r=n(301);n.d(t,"IfNode",(function(){return r.a}));var o=n(120);n.d(t,"InputNode",(function(){return o.a}));var c=n(302);n.o(c,"OutputNode")&&n.d(t,"OutputNode",(function(){return c.OutputNode})),n.o(c,"WhileNode")&&n.d(t,"WhileNode",(function(){return c.WhileNode}));var s=n(68);n.d(t,"OutputNode",(function(){return s.a}));var u=n(303);n.d(t,"WhileNode",(function(){return u.a}))}},[[640,1,2]]]);
//# sourceMappingURL=main.7ea9b396.chunk.js.map